FROM ghcr.io/kompakkt/mono/bun-base-image:latest AS builder

COPY . /app
WORKDIR /app
RUN bun install
RUN bun run ng build --base-href / --configuration production,docker

FROM docker.io/nginx:stable-alpine
COPY .nginx.conf /etc/nginx/conf.d/default.conf
COPY --from=builder /app/dist/repo/browser /usr/share/nginx/html
